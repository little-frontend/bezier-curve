var y=Object.defineProperty,b=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var h=(t,e,r)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))D.call(e,r)&&h(t,r,e[r]);if(f)for(var r of f(e))$.call(e,r)&&h(t,r,e[r]);return t},_=(t,e)=>b(t,C(e));import{d as v,c as P,a as w,b as c,w as k,v as T,o as m,r as g,e as M,f as A,g as I,h as B,F as L,i as N}from"./vendor.981f9efc.js";const O=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};O();var x=(t,e)=>{for(const[r,s]of e)t[r]=s;return t};const S=v({props:["points","handleClear","handleDraw"],setup(t){const e=P(()=>t.points.length<=2);return _(p({},t),{disabled:e})}}),F={style:{display:"flex",gap:"20px","align-items":"start"}},z=["disabled"];function E(t,e,r,s,n,o){return m(),w("div",null,[c("div",F,[c("button",{onClick:e[0]||(e[0]=(...a)=>t.handleClear&&t.handleClear(...a))},"Clear"),c("div",null,[c("button",{disabled:t.disabled,onClick:e[1]||(e[1]=(...a)=>t.handleDraw&&t.handleDraw(...a))},"Start draw",8,z),k(c("p",null," Please draw a few dots (>= 3) in the above drawing area first ",512),[[T,t.disabled]])])])])}var R=x(S,[["render",E],["__scopeId","data-v-5f0e8b1a"]]);const q=(t,e,r)=>({x:(1-r)*t.x+r*e.x,y:(1-r)*t.y+r*e.y});class H{constructor(e){this._ctx=e}get ctx(){return this._ctx}set ctx(e){this._ctx=e}clear(){!this._ctx||this._ctx.clearRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}drawRect(e,r,s,n){!this._ctx||this._ctx.strokeRect(e,r,s,n)}drawPoint({x:e,y:r},s){!this._ctx||(this._ctx.beginPath(),this._ctx.moveTo(e,r),this._ctx.arc(e,r,5,0,Math.PI*2),this._ctx.fillStyle=s||"#666",this._ctx.fill())}drawPaths(e,r){!this._ctx||(this._ctx.lineWidth=2,this._ctx.strokeStyle=r||"red",this._ctx.beginPath(),e.forEach(({x:s,y:n},o)=>{var a,l;o===0?(a=this._ctx)==null||a.moveTo(s,n):(l=this._ctx)==null||l.lineTo(s,n)}),this._ctx.stroke())}drawBezier(e,r){if(!this._ctx||e.length<=2)return;let s,n=0;const o=.001,a=[],l=i=>{if(i.length<2){a.push(i[0]),this.drawPoint(i[0],"#458fff"),this.drawPaths(a);return}this.drawPaths(i,"green");const u=[];for(let d=0;d<i.length-1;d++)u.push(q(i[d],i[d+1],r+n));l(u)};s&&clearInterval(s),s=setInterval(()=>{n+=o,window.requestAnimationFrame(()=>{this.clear(),l(e)}),n>=1&&s&&clearInterval(s)},1)}}const V=v({name:"App",components:{Tools:R},setup(){var a,l;const t=g(),e=M(new H((l=(a=t.value)==null?void 0:a.getContext("2d"))!=null?l:void 0)),r=g([]),s=i=>{r.value.push({x:i.offsetX,y:i.offsetY}),e.drawPoint({x:i.offsetX,y:i.offsetY})},n=()=>{r.value=[],e.clear()},o=()=>{e.drawBezier(r.value,0)};return A(()=>{t.value&&(e.ctx=t.value.getContext("2d"))}),{cvs:t,points:r.value,drawHelper:e,handleMouseDown:s,handleClear:n,handleDraw:o}}}),X=c("br",null,null,-1);function Y(t,e,r,s,n,o){const a=I("Tools");return m(),w(L,null,[c("canvas",{style:{cursor:"pointer"},ref:"cvs",width:"900",height:"450",class:"my-canvas",onMousedown:e[0]||(e[0]=(...l)=>t.handleMouseDown&&t.handleMouseDown(...l))},null,544),X,B(a,{points:t.points,handleClear:t.handleClear,handleDraw:t.handleDraw},null,8,["points","handleClear","handleDraw"])],64)}var j=x(V,[["render",Y]]);N(j).mount("#app");

import{d as h,c as p,a as u,o as _,r as d,b as m,e as x,f as g,g as w,F as y,h as C}from"./vendor.7a78bd4b.js";const b=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}};b();var v=(r,e)=>{for(const[n,s]of e)r[n]=s;return r};const M=h({props:["handleAddPoint","handleClear"],setup(r){return{clear:()=>{r.handleClear()}}}});function $(r,e,n,s,t,o){return _(),p("div",null,[u("div",null,[u("button",{onClick:e[0]||(e[0]=(...l)=>r.clear&&r.clear(...l))},"Clear")])])}var P=v(M,[["render",$],["__scopeId","data-v-d154fa92"]]);const T=(r,e,n)=>({x:(1-n)*r.x+n*e.x,y:(1-n)*r.y+n*e.y});class k{constructor(e){this._ctx=e}get ctx(){return this._ctx}set ctx(e){this._ctx=e}clear(){!this._ctx||this._ctx.clearRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}drawRect(e,n,s,t){!this._ctx||this._ctx.strokeRect(e,n,s,t)}drawPoint({x:e,y:n},s){!this._ctx||(this._ctx.moveTo(e,n),this._ctx.arc(e,n,5,0,Math.PI*2),this._ctx.fillStyle=s||"#666",this._ctx.fill())}drawPaths(e,n){!this._ctx||(this._ctx.lineWidth=2,this._ctx.strokeStyle=n||"red",this._ctx.beginPath(),e.forEach(({x:s,y:t},o)=>{var l,a;o===0?(l=this._ctx)==null||l.moveTo(s,t):(a=this._ctx)==null||a.lineTo(s,t)}),this._ctx.stroke())}drawBezier(e,n){if(!this._ctx||e.length<=2)return;let s,t=0;const o=.001,l=[],a=i=>{if(i.length<2){l.push(i[0]),this.drawPoint(i[0],"#458fff"),this.drawPaths(l);return}this.drawPaths(i,"green");const f=[];for(let c=0;c<i.length-1;c++)f.push(T(i[c],i[c+1],n+t));a(f)};s&&clearInterval(s),s=setInterval(()=>{t+=o,window.requestAnimationFrame(()=>{this.clear(),a(e)}),t>=1&&s&&clearInterval(s)},1)}}const A=h({name:"App",components:{Tools:P},setup(){var l,a;const r=d(),e=d(!1),n=m(new k((a=(l=r.value)==null?void 0:l.getContext("2d"))!=null?a:void 0)),s=d([]),t=i=>{e.value=!0,s.value.push({x:i.offsetX,y:i.offsetY}),n.drawPoint({x:i.offsetX,y:i.offsetY})},o=()=>{s.value=[],n.clear()};return x(()=>{r.value&&(n.ctx=r.value.getContext("2d"))}),{cvs:r,points:s,drawHelper:n,handleMouseDown:t,handleClear:o}},watch:{points:{handler(r){r.length>0&&this.drawHelper.drawBezier(r,0)},deep:!0}}}),I=u("br",null,null,-1);function B(r,e,n,s,t,o){const l=g("Tools");return _(),p(y,null,[u("canvas",{style:{cursor:"pointer"},ref:"cvs",width:"900",height:"450",class:"my-canvas",onMousedown:e[0]||(e[0]=(...a)=>r.handleMouseDown&&r.handleMouseDown(...a)),onMouseup:e[1]||(e[1]=(...a)=>r.handleMouseUp&&r.handleMouseUp(...a))},null,544),I,w(l,{handleClear:r.handleClear},null,8,["handleClear"])],64)}var D=v(A,[["render",B]]);C(D).mount("#app");
